$(function(){    $('.quantity').numberMask({beforePoint:3});//Edit quantity    $('.quantity').keyup(function(){        var id = $(this).attr('id').substr(8);        var val = parseInt($(this).val());        if (val == 0) {            $(this).attr('value','1');        }        if (val > 0) {            $.ajax({                type: 'post',                dataType: 'json',                data: {                    'id':		id,                    'quantity':	val                },                beforeSend: function(){                    $('#carttable').addClass('loading');                },                complete: function(){                    $('#carttable').removeClass('loading');                },                success: function(response){                    $('#productsin').html('Товаров: '+response.itemscount);                    $('#totalsum').html('На сумму: '+response.total+' p.');                    $('#sum'+id).html(response.summa);                    $('#total').html(response.total);                },                url: '/shop/cart/update'            });        }        if (!val) {            return false;        }    });    $('.q-minus').click(function() {        var id = $(this).attr('id').substr(14);        var currentVal = parseInt($('#quantity'+id).val());        if (currentVal != NaN && currentVal > 1)        {            var val = currentVal - 1;            $('#quantity'+id).val(val);            $.ajax({                type: 'post',                dataType: 'json',                url: '/shop/cart/update',                data: {                    'id': id,                    'quantity':	val                },                beforeSend: function(){                    $('#carttable').addClass('loading');                },                success: function(response){                    $('#sum'+id).html(response.summa);                    $('#total').html(response.total);                    $('#productsin').html('Товаров: '+response.itemscount);                    $('#totalsum').html('На сумму: '+response.total+' p.');                },                complete: function(){                    $('#carttable').removeClass('loading');                }            });        }    });    $('.q-plus').click(function() {        var id = $(this).attr('id').substr(13);        var currentVal = parseInt($('#quantity'+id).val());        if (currentVal != NaN)        {            var val = currentVal + 1;            $('#quantity'+id).val(val);            $.ajax({               type: 'post',                dataType: 'json',                url: '/shop/cart/update',                data: {                    'id':		id,                    'quantity':	val                },                beforeSend: function(){                    $('#carttable').addClass('loading');                },                success: function(response){                    $('#sum'+id).html(response.summa);                    $('#total').html(response.total);                    $('#productsin').html('Товаров: '+response.itemscount);                    $('#totalsum').html('На сумму: '+response.total+' p.');                },                complete: function(){                    $('#carttable').removeClass('loading');                }            });        }    });    if ($('div').is('.errorSummary')) {        $('.order-form').removeAttr('style');        $('.order-button').hide();    }    $("#SOrders_email").popover({ title: 'Нам нужен ваш Email', content: 'чтобы с вами можно было связаться по поводу заказа' });    $("#SOrders_phone").popover({ title: 'Оставьте номер,', content: 'а мы позвоним, чтобы еще раз всё уточнить!' });    $("#SOrders_comments").popover({ title: 'Например', content: 'код от домофона' });});